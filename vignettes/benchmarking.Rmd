---
title: "benchmarking"
author: "Akarsh Goyal"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{benchmarking}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(solvers)
library(lattice)
library(directlabels)
```

```{r}

# Generating data
n <- 100
p <- 2
d <- randomProblem(n, p, response = "binomial", density=0.5)
x <- d$x
y <- d$y

# Obtaining the fit for the solvers we want to compare
admm_nr <- ADMM(x, y, family="binomial", opt_algo="nr", alpha=(0.01),diagnostics=TRUE)
admm_bfgs <- ADMM(x, y, family="binomial", opt_algo="bfgs", alpha=(0.01),diagnostics=TRUE)

# Merging the metrics into one dataframe
f <- data.frame(
  solver = rep(c("ADMM(NR)", "ADMM(BFGS)"), 
               times = c(length(admm_nr$iteration_timings[[1]]),
                       length(admm_bfgs$iteration_timings[[1]]))),
  loss = c(admm_nr$loss[[1]], admm_bfgs$loss[[1]]),
  time = c(admm_nr$iteration_timings[[1]], admm_bfgs$iteration_timings[[1]])
)


# Plotting objective vs time
pl <- xyplot(loss ~ time, group = solver, data = f, type = "l")
direct.label(pl, "angled.boxes")

```
